---
description: HARD GATE - Commit and push ALL changes before marking work complete. Never leave uncommitted files.
alwaysApply: true
---

# Git Commit & Push Gate — MANDATORY (No Exceptions)

**You MUST commit and push ALL modified files before you tell the user the work is done.**

## Trigger

Before responding "Done", "Complete", "Fixed", "Here are the changes", or any similar completion message:

1. Run `git status`
2. If there are ANY modified or untracked files → commit and push them
3. Do NOT tell the user work is complete while files remain uncommitted

## Required Steps

```
git status
```

If output shows modified/untracked files:

```
git add -A
git commit -m "descriptive message"
git push
```

## Scope

- **All** modified files: src/*, index.html, package.json, src-tauri/*, etc.
- Run `npm run build` first if you changed source files that affect the bundle

## Full release (PR + merge + build)

If the user asked for a PR, merge, release, or **final build** (ClipWave app): after commit and push, **run the full flow** — do not stop at push.

1. Commit and push (as above).
2. Run the task **"PR: create + merge (squash) + update main + delete branch + build app"** (or **"PR before build"**). This will:
   - Create the PR (title/body from last commit),
   - Merge the PR with squash,
   - Checkout main and pull,
   - Delete the feature branch (local + remote),
   - Run the ClipWave Tauri app build (`npm run build:app`).

Invoke via: Run Task → "PR: create + merge (squash) + update main + delete branch + build app", or run `./scripts/pr-merge-and-build.ps1` from repo root (PowerShell).

**Violation = user asked for PR/merge/release/final build and you only committed and pushed without running the full flow.**

## Rule

**Violation = telling the user work is done while `git status` shows uncommitted changes. Never skip. No exceptions.**

If you made edits, your final action before the completion message MUST be a successful `git push`. If they asked for release/final build, it MUST include running the PR+merge+delete+build flow.
